import {
    AUTH_PROFILE,
    AUTH_LOGIN,
    AUTH_LOGOUT,
    AUTH_REGISTER,
    INVALIDATE_PROFILE,
} from '../actions/authActions';

const DEFAULT_STATE = {
  isLoading: false,
  didInvalidate: false,
};

export default function auth(state = DEFAULT_STATE, action) {
  const { type, status, profile, error, message } = action;

  switch (type) {
    case AUTH_LOGIN:
      if (!status) {
        return {...DEFAULT_STATE, isLoading: true};
      }

    case AUTH_PROFILE:
      if (!status) {
        return {...state, isLoading: true};
      }

      if (status === 'success') {
        return {...state, profile: profile, isLoading: false, didInvalidate: false, error: null};
      } else {
        return {...DEFAULT_STATE, error: error, isLoading: false, didInvalidate: false};
      }

    case AUTH_REGISTER:
      if (!status) {
        return {...state, isLoading: true};
      }

      if (status === 'success') {
        return {...state, message: message, error: null};
      } else {
        return {...state, error: error};
      }

    case INVALIDATE_PROFILE:
      return {...state, didInvalidate: true};

    case AUTH_LOGOUT:
      return state;

    default:
      return state;
  }
};
