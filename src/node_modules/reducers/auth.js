import {
  AUTH_PROFILE,
  AUTH_LOGIN,
  AUTH_LOGOUT,
  AUTH_REGISTER,
  INVALIDATE_PROFILE
} from 'actions'

const DEFAULT_STATE = {
  isLoading: false,
  didInvalidate: false
};

export default function auth(state = DEFAULT_STATE, action) {
  const { type, status, profile, error } = action;

  switch (type) {
    case AUTH_LOGIN:
      if (!status) {
        return { ...DEFAULT_STATE, isLoading: true }
      }
    case AUTH_PROFILE:
      if (!status) {
        return { ...state, isLoading: true }
      }
      if (status === 'success') {
        return { ...state, profile: profile, isLoading: false, didInvalidate: false}
      } else {
        return { ...state, isLoading: false, didInvalidate: false }
      }
    case INVALIDATE_PROFILE:
      return { ...state, didInvalidate: true}
    case AUTH_LOGOUT:
      return state;
    default:
      return state;
  }
}