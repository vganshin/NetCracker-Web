import React from 'react';
import { connect } from 'react-redux';
import Profile from 'components/Profile';
import LoginForm from 'components/LoginForm';
import { login } from 'actions/authActions';
import { pushState } from 'redux-router';
import TokenList from 'components/TokenList';
import { subscribe, unsubscribe, getTokens } from 'actions/subscriptions';

@connect(state => ({
  subscribed: state.subscriptions.tokens.filter(token => token.subscribed),
  unsubscribed: state.subscriptions.tokens.filter(token => !token.subscribed)
}))
export default class SubscriptionsPage extends React.Component {
  componentWillMount() {
    this.props.dispatch(getTokens());
  }

  render() {
    const { dispatch, subscribed, unsubscribed } = this.props;

    return (
      <div>
        <TokenList tokens={subscribed} submit={tokenId => dispatch(unsubscribe(tokenId))} />
        <TokenList tokens={unsubscribed} submit={tokenId => dispatch(subscribe(tokenId))} />
      </div>
    );
  }
}
