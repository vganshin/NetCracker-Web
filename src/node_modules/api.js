function login(credentials) {
  return new Promise((resolve, reject) => {
    const email = credentials.email;
    const password = credentials.password;
    const xmlhttp = new XMLHttpRequest();

    xmlhttp.open('POST', 'http://localhost:8080/auth/login', true);
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState === 4) {     
        if (xmlhttp.status === 200) {
          const response = JSON.parse(xmlhttp.responseText)
          return json.status === "OK" ? resolve(json.message) : reject("Not Auth");
        } else {
          return reject("Not Auth");
        }
      }
    };

    xmlhttp.send(`email=${encodeURIComponent(login)}&password=${encodeURIComponent(password)}`);
  })
}


const api = {}

api.login = login

export default api