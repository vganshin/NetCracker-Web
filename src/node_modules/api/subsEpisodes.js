const episodesApi = {};

episodesApi.getSubsEpisodes = (numberOfEpisodes , fromEpisode) => new Promise((resolve, reject) => {

    const xmlhttp = new XMLHttpRequest();

    xmlhttp.open('POST', '/api/get/subsEpisodes', true);
    xmlhttp.setRequestHeader('Content-Type', 'application/json');

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4) {
            if (xmlhttp.status === 200) {
                const response = JSON.parse(xmlhttp.responseText)
                return response.status === "OK" ? resolve(response.message) : reject(`Something went wrong: ${response.message}`);
            } else {
                return reject(`Something went wrong`);
            }
        }
    };
    xmlhttp.send(JSON.stringify({numberOfEpisodes, fromEpisode}));
});

export default episodesApi