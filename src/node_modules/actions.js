import api from 'api'

/*
 * action types
 */

export const INVALIDATE_PROFILE = 'INVALIDATE_PROFILE'
export const AUTH_PROFILE = 'AUTH_PROFILE'
export const AUTH_LOGIN = 'AUTH_LOGIN'
export const AUTH_LOGOUT = 'AUTH_LOGOUT'
export const AUTH_REGISTER = 'AUTH_REGISTER'

/*
 * action creators
 */

export function authLoginRequest() {
  return {
    type: AUTH_LOGIN
  }
}

export function authLoginSuccess(profile) {
  return {
    type: AUTH_LOGIN,
    status: 'success',
    profile: profile
  }
}

export function authLoginFailure(status, error) {
  return {
    type: AUTH_LOGIN,
    status: status,
    error: error
  }
}

export function login(credentials) {
  return dispatch => {
    dispatch(authLoginRequest());

    return api.login(credentials)
      .then(profile => dispatch(authLoginSuccess(profile)))
      .catch((status, error) => dispatch(authLoginFailure(status, error)))
  }
}